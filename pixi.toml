[project]
authors = ["Jermiah Joseph <jermiahjoseph98@gmail.com>"]
channels = ["conda-forge"]
description = "Add a short description here"
name = "Adv360-Pro-ZMK"
platforms = ["osx-arm64"]
version = "0.1.0"

[tasks]
make.cmd = "make"
make.inputs = [
  "config/west.yml",
  "config/adv360_left.keymap",
  "config/adv360_right.keymap",
  "config/adv360.keymap",
  "Dockerfile",
  "bin/build.sh",
  "bin/get_version.sh",
  "bin/flashadv.sh",
]

generate_keymap.cmd = "keymap parse -c 18 -z config/adv360.keymap > sweep_keymap.yaml"
generate_keymap.description = "generates a keymap yaml for the keymap-drawer"
generate_keymap.inputs = ["config/adv360.keymap"]
generate_keymap.outputs = ["sweep_keymap.yaml"]

svg.cmd = "keymap draw sweep_keymap.yaml >sweep_keymap.ortho.svg"
svg.description = "generates a keymap svg"
svg.depends_on = ["generate_keymap"]
svg.inputs = ["sweep_keymap.yaml"]
svg.outputs = ["sweep_keymap.ortho.svg"]

[target.osx-arm64.tasks]
flash.cmd = "sudo ./bin/flashadv.sh"
flash.description = "mounts the flash drive"
flash.depends_on = ["make"]

port.cmd = "cat firmware/latest-left.uf2 > /Volumes/ADV360PRO/left.uf2"
port.description = "copies the latest firmware to the flash drive"
port.depends_on = ["flash"]

[dependencies]
python = ">=3.13.0,<4"

[pypi-dependencies]
keymap-drawer = ">=0.18.1, <0.19"
